# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION BEGIN
PassengerAppRoot "/home/jookeezc/encuestas.jookeez.com"
PassengerBaseURI "/"
PassengerPython "/home/jookeezc/virtualenv/encuestas.jookeez.com/3.7/bin/python"
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION END
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION BEGIN
<IfModule Litespeed>
</IfModule>
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION END
#Asegurando htaccess
<Files .htaccess>
order allow,deny
deny from all
</Files>
#Conjunto de caracteres por defecto
AddDefaultCharset utf-8
#Establece el idioma por defecto
DefaultLanguage es-ES
#No muestra los archivos como un directorio index.
Options -Indexes
#Forzar el uso de HTTPS
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,NE]
Header always set Content-Security-Policy "upgrade-insecure-requests;"
#Indica al navegador que descargue los archivos multimedia
AddType application/octet-stream .mp3
#Denegar acceso a robots maliciosos, extractores de webs y navegadores offline
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} ^Anarchie [OR]
RewriteCond %{HTTP_USER_AGENT} ^ASPSeek [OR]
RewriteCond %{HTTP_USER_AGENT} ^attach [OR]
RewriteCond %{HTTP_USER_AGENT} ^autoemailspider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Xenu [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus.*Webster [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus
RewriteRule ^.* - [F,L]
#Evitar el hotlinking
Options +FollowSymlinks
#Protect against hotlinking

#RewriteRule .*.(gif|jpg|png|mp4|mp3|zip|js|swf|html|php)$ - [F,L]
#Corrige el enrutamiento
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !^/[0-9]+\..+\.cpaneldcv$
RewriteCond %{REQUEST_URI} !^/[A-F0-9]{32}\.txt(?:\ Comodo\ DCV)?$
RewriteRule ^(.*)$ $1.php
#Define el tiempo de la cache de una semana en segundos
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|swf|xml|txt|css)$">
Header set Cache-Control "max-age=2592000, public"
</FilesMatch>
#Redireccionamiento
Redirect 301 /SPRINT1 https://encuestas.jookeez.com/sprint1
Redirect 301 /SPRINT2 https://encuestas.jookeez.com/sprint2
Redirect 301 /SPRINT3 https://encuestas.jookeez.com/sprint3